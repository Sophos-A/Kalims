require('dotenv').config();
const { calculateTriageScore } = require('../services/triageService');

// Test cases
const testCases = [
    {
        name: "Normal patient",
        vitals: {
            temperature: 37,
            heartRate: 75,
            bloodPressure: "120/80",
            respiratoryRate: 16,
            oxygenSaturation: 98
        },
        symptoms: {
            painLevel: 3,
            difficultyBreathing: false,
            chestPain: false,
            alteredMentalStatus: false
        },
        vulnerabilities: []
    },
    {
        name: "Elderly patient",
        vitals: {
            temperature: 37,
            heartRate: 75,
            bloodPressure: "120/80",
            respiratoryRate: 16,
            oxygenSaturation: 98
        },
        symptoms: {
            painLevel: 3,
            difficultyBreathing: false,
            chestPain: false,
            alteredMentalStatus: false
        },
        vulnerabilities: ["elderly"]
    },
    {
        name: "Elderly + wheelchair user",
        vitals: {
            temperature: 37,
            heartRate: 75,
            bloodPressure: "120/80",
            respiratoryRate: 16,
            oxygenSaturation: 98
        },
        symptoms: {
            painLevel: 3,
            difficultyBreathing: false,
            chestPain: false,
            alteredMentalStatus: false
        },
        vulnerabilities: ["elderly", "wheelchair_user"]
    },
    {
        name: "High priority patient with vulnerabilities",
        vitals: {
            temperature: 39,
            heartRate: 130,
            bloodPressure: "180/100",
            respiratoryRate: 30,
            oxygenSaturation: 85
        },
        symptoms: {
            painLevel: 8,
            difficultyBreathing: true,
            chestPain: true,
            alteredMentalStatus: true
        },
        vulnerabilities: ["elderly", "urgent_referral"]
    }
];

console.log("Testing vulnerability boosting logic...\n");

testCases.forEach((testCase, index) => {
    const score = calculateTriageScore(testCase.vitals, testCase.symptoms, testCase.vulnerabilities);
    console.log(`${index + 1}. ${testCase.name}:`);
    console.log(`   Vitals: ${JSON.stringify(testCase.vitals)}`);
    console.log(`   Symptoms: ${JSON.stringify(testCase.symptoms)}`);
    console.log(`   Vulnerabilities: ${testCase.vulnerabilities.join(', ') || 'None'}`);
    console.log(`   Triage Score: ${score.toFixed(3)}\n`);
});

process.exit(0);
